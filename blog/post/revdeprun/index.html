<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title> revdeprun: Rust CLI for R package reverse dependency check automation - Nan Xiao | 肖楠 </title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="referrer" content="no-referrer">
    <meta name="description" content="revdeprun is a Rust CLI tool that makes running reverse dependency checks on cloud instances as easy as a single command. Learn why this matters for R package maintainers and how it can save you hours of manual setup.
" />

    
    <meta property="og:type" content="article" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:site_name" content="Nan Xiao | 肖楠" />
    <meta property="og:url" content="https://nanx.me/blog/post/revdeprun/" />
    <meta property="og:title" content="revdeprun: Rust CLI for R package reverse dependency check automation" />
    <meta property="og:description" content="revdeprun is a Rust CLI tool that makes running reverse dependency checks on cloud instances as easy as a single command. Learn why this matters for R package maintainers and how it can save you hours of manual setup.
" />
    <meta property="og:image" content="https://nanx.me/image/jack-stapleton-J9y7LWpRTWo-unsplash.jpg" />
    <meta property="og:image:secure_url" content="https://nanx.me/image/jack-stapleton-J9y7LWpRTWo-unsplash.jpg" />
    <meta property="article:published_time" content="2025-10-27T17:42:00Z" />
    <meta property="article:modified_time" content="2025-10-27T17:42:00Z" />
    <meta property="article:author" content="Nan Xiao" />

    
    <meta name="twitter:card" content="summary_large_image" />
    
    <meta name="twitter:site" content="@nanxstats">
    <meta name="twitter:creator" content="@nanxstats">
    
    <meta name="twitter:title" content="revdeprun: Rust CLI for R package reverse dependency check automation" />
    <meta name="twitter:description" content="revdeprun is a Rust CLI tool that makes running reverse dependency checks on cloud instances as easy as a single command. Learn why this matters for R package maintainers and how it can save you hours of manual setup.
" />
    <meta name="twitter:image" content="https://nanx.me/image/jack-stapleton-J9y7LWpRTWo-unsplash.jpg" />
    <meta name="twitter:image:alt" content="revdeprun: Rust CLI for R package reverse dependency check automation" />

    
    <meta property="og:linkedin:actor" content="nanxstats" />

    <link rel="canonical" href="https://nanx.me/blog/post/revdeprun/">

    <link rel="stylesheet" href="https://nanx.me/css/tailwind.css" />
    <link rel="stylesheet" href="https://nanx.me/css/custom.css" />

    
    <link rel="stylesheet" href="https://nanx.me/css/textmate.css" />
    

    

    <link rel="shortcut icon"
        href="https://nanx.me/image/favicon.png">

    
</head>

<body class="bg-paper text-ink font-serif antialiased selection:bg-zinc-200">
    
<header class="py-8 lg:py-12 text-sm font-sans tracking-wide max-w-[67ch] mx-auto w-full px-4 sm:px-6">
    <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 sm:gap-0">
        <a href="https://nanx.me/" class="font-medium text-ink hover:text-accent transition-colors">
            Nan Xiao
        </a>
        <nav class="flex flex-wrap gap-4 sm:gap-6 text-zinc-600">
            
            
            <a class="text-ink font-medium"
                href="https://nanx.me/blog/">
                Blog
            </a>
            
            <a class="hover:text-accent transition-colors"
                href="https://nanx.me/software/">
                Software
            </a>
            
            <a class="hover:text-accent transition-colors"
                href="https://nanx.me/papers/">
                Papers
            </a>
            
            <a class="hover:text-accent transition-colors"
                href="https://nanx.me/talks/">
                Talks
            </a>
            
            <a class="hover:text-accent transition-colors"
                href="https://nanx.me/books/">
                Books
            </a>
            
            <a class="hover:text-accent transition-colors"
                href="https://nanx.me/about/">
                About
            </a>
            
        </nav>
    </div>
</header>

<main class="content my-10 max-w-[65ch] mx-auto w-full px-4 sm:px-6">
    <article>
        <header class="mb-14">
            <h1 class="text-3xl lg:text-4xl font-sans tracking-tight text-ink font-medium mb-4">revdeprun: Rust CLI for R package reverse dependency check automation</h1>

            <div class="text-zinc-500 font-sans text-sm tracking-wide">
                
                
                <span class="author mr-2" title="Nan Xiao">
                    Nan Xiao
                </span>
                
                

                <span class="date middot tabular-nums mr-2" title='Mon Oct 27 2025 17:42:00 UTC'>
                    October 27, 2025
                </span>

                <span class="reading-time middot">
                    4 min read
                </span>

                <div class="mt-8 flex flex-wrap gap-2">
                    
                    <a href="https://nanx.me/tags/r"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        R
                    </a>
                    
                    <a href="https://nanx.me/tags/rust"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        Rust
                    </a>
                    
                    <a href="https://nanx.me/tags/cargo"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        Cargo
                    </a>
                    
                    <a href="https://nanx.me/tags/rust-packages"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        Rust packages
                    </a>
                    
                    <a href="https://nanx.me/tags/r-packages"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        R packages
                    </a>
                    
                    <a href="https://nanx.me/tags/automation"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        automation
                    </a>
                    
                    <a href="https://nanx.me/tags/developer-experience"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        developer experience
                    </a>
                    
                    <a href="https://nanx.me/tags/integration-testing"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        integration testing
                    </a>
                    
                    <a href="https://nanx.me/tags/xfun"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        xfun
                    </a>
                    
                    <a href="https://nanx.me/tags/reverse-dependency"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        reverse dependency
                    </a>
                    
                    <a href="https://nanx.me/tags/revdepcheck"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        revdepcheck
                    </a>
                    
                    <a href="https://nanx.me/tags/toolchain"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        toolchain
                    </a>
                    
                    
                    
                </div>
            </div>

        </header>

        <div class="prose prose-zinc max-w-none">
            
    


<div class="float">
<img src="https://nanx.me/image/jack-stapleton-J9y7LWpRTWo-unsplash.jpg" alt="Smoke and speed: a race car mid-drift on the track. Photo by Jack Stapleton." />
<div class="figcaption">Smoke and speed: a race car mid-drift on the track.
Photo by <a href="https://unsplash.com/photos/J9y7LWpRTWo">Jack Stapleton</a>.</div>
</div>
<blockquote>
<p><strong>Update (2025-10-31)</strong>: revdeprun 1.0.0 switched to using a custom workflow
to pre-install binary dependencies for checking reverse dependencies,
and run parallel checks using xfun::rev_check(). This significantly improves
performance and reliability. Read the release notes
<a href="https://github.com/nanxstats/revdeprun/releases/tag/v1.0.0">here</a>.
This post has been updated to reflect these changes.</p>
</blockquote>
<p>I’m glad to announce the release of
<a href="https://crates.io/crates/revdeprun">revdeprun</a>, a Rust CLI tool that makes
it easy to run reverse dependency checks on cloud instances<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>.</p>
<p>If you maintain an R package with many reverse dependencies, you’ll know that
revdep checking can be time-consuming and requires significant computational
resources. revdeprun aims to make this process as painless as possible by
automating the entire workflow in a single command.</p>
<p>You can install revdeprun from crates.io using Cargo:</p>
<pre class="bash"><code>cargo install revdeprun</code></pre>
<p>Then, running a full reverse dependency check is as simple as:</p>
<pre class="bash"><code>revdeprun https://github.com/YOUR-USERNAME/YOUR-REPOSITORY.git</code></pre>
<p>This will automatically set up R, configure your environment, clone your package,
and run <code>xfun::rev_check()</code> with all the sensible defaults.
The <a href="https://github.com/nanxstats/revdeprun">README</a> provides more details about
installation and usage.</p>
<div id="why-reverse-dependency-checking-matters" class="section level2">
<h2>Why reverse dependency checking matters</h2>
<p>If you’ve been lucky enough to have other R package authors depend on your work,
you’ll eventually need to think about reverse dependency checking.
The idea is simple but important: before you release a new version of your package,
you want to make sure that your changes don’t break any of the packages that
depend on you. It’s like integration testing, but at the CRAN ecosystem level.</p>
<p>The <a href="https://r-pkgs.org/release.html#sec-release-revdep-checks">R Packages book</a>
has a nice explanation of the overall workflow, and there are several excellent
tools in R for running these checks locally:</p>
<ul>
<li><a href="https://github.com/r-lib/revdepcheck"><code>revdepcheck</code></a> from Gábor Csárdi</li>
<li><a href="https://github.com/yihui/crandalf"><code>crandalf</code></a> and <code>xfun::rev_check()</code> from Yihui Xie</li>
<li><a href="https://github.com/HenrikBengtsson/revdepcheck.extras"><code>revdepcheck.extras</code></a> from Henrik Bengtsson</li>
</ul>
<p>These tools work great when you have a handful of reverse dependencies,
but things get trickier as that number grows.</p>
</div>
<div id="the-challenge-of-scale" class="section level2">
<h2>The challenge of scale</h2>
<p>The trouble starts when you have many reverse dependencies.
Reverse dependency checking is an embarrassingly parallel, CPU-bound task:
each package can be checked independently, and more CPU cores mean faster results.</p>
<p>If you’re maintaining a popular package with 100+ reverse dependencies,
even a maxed out desktop setup with 32 threads<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> won’t be fast enough.
You really need to move to the cloud, where you can spin up instances
with 128+ vCPUs on demand.</p>
<p>But there is another reason to use cloud instances: security.
Running reverse dependency checks means executing third-party code
that you probably shouldn’t fully trust. Using disposable cloud instances
gives you a clean environment that you can throw away when you’re done.</p>
<p>The catch is that setting up these throwaway instances is tedious.
You need to install R, configure package repositories, set up the right
environment variables, and handle a bunch of other running context details<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>.</p>
<p>This manual setup gets old fast when you’re spinning up instances regularly.
That’s the gap that revdeprun fills: it handles all the provisioning and
configuration automatically, so you can focus on reviewing the actual results.</p>
</div>
<div id="why-rust" class="section level2">
<h2>Why Rust?</h2>
<p>You might be wondering why this is a Rust CLI tool rather than an R package,
a Python package, or a simple shell script. The answer comes down to the
constraints of the problem: when you’re paying for cloud compute by the minute,
you want everything to work smoothly on the first try, with minimal dependencies.</p>
<p>Rust fits this niche well:</p>
<ul>
<li><p><strong>Better than a shell script</strong>: Rust gives you proper error handling,
better testing, and easier distribution. It also has better cross-platform
potential if we want to support Windows or macOS in the future.</p></li>
<li><p><strong>Easier than R or Python</strong>: To use R or Python to set up R itself
feels circular. We’d need to set up the language runtime first,
which is exactly what we’re trying to automate. With Rust, you can distribute
a single static executable that just works.</p></li>
</ul>
<p>That said, the core revdep checking recipe is still written in R:
see it in <a href="https://github.com/nanxstats/revdeprun/blob/main/src/revdep.rs"><code>revdep.rs</code></a>.
The Rust tool is really just a wrapper that orchestrates
the setup and execution.</p>
</div>
<div id="contributing" class="section level2">
<h2>Contributing</h2>
<p>If you run into any issues or have ideas for improvements, please
<a href="https://github.com/nanxstats/revdeprun/issues">open an issue</a>.
The codebase is relatively straightforward so contributions are very welcome.</p>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>“There is no cloud, it’s just someone else’s computer.”<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>As of today, an example is AMD Ryzen 9 9950X.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>We touched on some of these details in a
<a href="https://nanx.me/blog/post/ggsci-3-1-0/">previous post</a>.<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>



        </div>

        
        <nav class="pagination-nav mt-10 mb-3" aria-label="Blog post navigation">
            <div class="navigation-btns">
                
                <a href="https://nanx.me/blog/post/ggsci-4-0-0/" class="btn-nav btn-prev w-full">
                    <div class="btn-content">
                        <div class="pagination-nav-sublabel">Previous</div>
                        <div class="pagination-nav-label">&laquo; ggsci 4.0.0: 400&#43; new color palettes</div>
                    </div>
                </a>
                

                
                <a href="https://nanx.me/blog/post/revdep-speedrun/" class="btn-nav btn-next w-full">
                    <div class="btn-content">
                        <div class="pagination-nav-sublabel">Next</div>
                        <div class="pagination-nav-label">Reverse dependency check speedrun: a data.table case study &raquo;</div>
                    </div>
                </a>
                
            </div>
        </nav>
        

    </article>
</main>

<section id="comments">
    <div class="py-3 content">
        <div class="mx-auto max-w-[65ch] w-full px-4 sm:px-6">
            <div class="comments">
                <script src="https://utteranc.es/client.js" repo="nanxstats/blog-comments" issue-term="pathname"
                    label="comment" theme="github-light" crossorigin="anonymous" async>
                    </script>
            </div>
        </div>
    </div>
</section>
<footer class="mt-20 mb-10 text-center font-sans text-sm text-zinc-500 tracking-wide">
    <div class="tufte-grid">
        <div class="flex flex-col items-center gap-4">
            <div class="flex flex-wrap items-center justify-center gap-x-4 gap-y-2">
                
                
                <a href="https://github.com/nanxstats" target="_blank" rel="noopener"
                    class="hover:text-accent transition-colors">GitHub</a>
                
                
                
                
                <a href="https://www.linkedin.com/in/nanxstats" target="_blank" rel="noopener"
                    class="hover:text-accent transition-colors">LinkedIn</a>
                
                
                <a href="https://bsky.app/profile/nanxstats.bsky.social" target="_blank" rel="noopener"
                    class="hover:text-accent transition-colors">Bluesky</a>
                
                
                <a href="https://twitter.com/nanxstats" target="_blank" rel="noopener"
                    class="hover:text-accent transition-colors">Twitter</a>
                
                
                
                <a href="https://nanx.me/colophon/" class="hover:text-accent transition-colors">Colophon</a>
                
                
            </div>

            
            <div class="mt-2">
                © 2026 Nan Xiao. All rights reserved.
            </div>
            
        </div>
    </div>
</footer>


    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"
        integrity="sha512-EBLzUL8XLl+va/zAsmXwS7Z2B1F9HUHkZwyS/VKwh3S7T/U0nF4BaU29EP/ZSf6zgiIxYAnKLu6bJ8dqpmX5uw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/r.min.js" defer></script>
    
    <script>
        window.addEventListener('load', function () {
            hljs.highlightAll();
        }, true);
    </script>
    

    

    
    
    

    
</body>

</html>