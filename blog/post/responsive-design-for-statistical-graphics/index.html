<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title> Responsive Design for Statistical Graphics with Shiny and ggplot2 - Nan Xiao | 肖楠 </title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="referrer" content="no-referrer">
    <meta name="description" content="Explore the new approach to adaptive visualizations using responsive statistical graphics with Shiny and ggplot2. This post breaks down the process of creating statistical graphics that dynamically adapt to various screen sizes, transforming how data is visualized and consumed. Discover the nuances of fitting responsive graphics into responsive containers and optimizing layout behaviors.
" />

    
    <meta property="og:type" content="article" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:site_name" content="Nan Xiao | 肖楠" />
    <meta property="og:url" content="https://nanx.me/blog/post/responsive-design-for-statistical-graphics/" />
    <meta property="og:title" content="Responsive Design for Statistical Graphics with Shiny and ggplot2" />
    <meta property="og:description" content="Explore the new approach to adaptive visualizations using responsive statistical graphics with Shiny and ggplot2. This post breaks down the process of creating statistical graphics that dynamically adapt to various screen sizes, transforming how data is visualized and consumed. Discover the nuances of fitting responsive graphics into responsive containers and optimizing layout behaviors.
" />
    <meta property="og:image" content="https://nanx.me/image/amy-shamblen-DhULFYb5J9w-unsplash.jpg" />
    <meta property="og:image:secure_url" content="https://nanx.me/image/amy-shamblen-DhULFYb5J9w-unsplash.jpg" />
    <meta property="article:published_time" content="2023-06-05T01:00:00Z" />
    <meta property="article:modified_time" content="2023-06-05T01:00:00Z" />
    <meta property="article:author" content="Nan Xiao" />

    
    <meta name="twitter:card" content="summary_large_image" />
    
    <meta name="twitter:site" content="@nanxstats">
    <meta name="twitter:creator" content="@nanxstats">
    
    <meta name="twitter:title" content="Responsive Design for Statistical Graphics with Shiny and ggplot2" />
    <meta name="twitter:description" content="Explore the new approach to adaptive visualizations using responsive statistical graphics with Shiny and ggplot2. This post breaks down the process of creating statistical graphics that dynamically adapt to various screen sizes, transforming how data is visualized and consumed. Discover the nuances of fitting responsive graphics into responsive containers and optimizing layout behaviors.
" />
    <meta name="twitter:image" content="https://nanx.me/image/amy-shamblen-DhULFYb5J9w-unsplash.jpg" />
    <meta name="twitter:image:alt" content="Responsive Design for Statistical Graphics with Shiny and ggplot2" />

    
    <meta property="og:linkedin:actor" content="nanxstats" />

    <link rel="canonical" href="https://nanx.me/blog/post/responsive-design-for-statistical-graphics/">

    
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        serif: ['"Martina Plantijn"', 'Newsreader', 'Georgia', 'Cambria', '"Times New Roman"', 'Times', 'serif'],
                        sans: ['"Instrument Sans"', 'system-ui', '-apple-system', '"Segoe UI"', 'Roboto', '"Helvetica Neue"', 'Arial', 'sans-serif'],
                        mono: ['"Liga Noto Sans Mono"', 'ui-monospace', 'SFMono-Regular', '"SF Mono"', 'Menlo', 'Consolas', 'monospace'],
                    },
                    colors: {
                        paper: '#fdfdfd',
                        ink: '#1c1c1c',
                        accent: '#991b1b',  
                    },
                    typography: {
                        DEFAULT: {
                            css: {
                                maxWidth: 'none',
                                color: '#1c1c1c',
                                '--tw-prose-body': '#1c1c1c',
                                '--tw-prose-headings': '#1c1c1c',
                                '--tw-prose-links': '#991b1b',
                                '--tw-prose-bold': '#111827',
                                '--tw-prose-counters': '#71717a',
                                '--tw-prose-bullets': '#d4d4d8',
                                '--tw-prose-hr': '#e4e4e7',
                                '--tw-prose-quotes': '#1c1c1c',
                                '--tw-prose-quote-borders': '#d4d4d8',
                                '--tw-prose-captions': '#71717a',
                                '--tw-prose-code': '#1c1c1c',
                                '--tw-prose-pre-code': '#1c1c1c',
                                '--tw-prose-pre-bg': '#fdfdfd',
                                '--tw-prose-th-borders': '#d4d4d8',
                                '--tw-prose-td-borders': '#e4e4e7',
                                'pre': {
                                    color: '#1c1c1c',
                                    backgroundColor: '#fdfdfd !important',
                                    border: '1px solid #e4e4e7',
                                },
                                a: {
                                    color: '#991b1b',
                                    textDecoration: 'none',
                                    fontWeight: '400',
                                    borderBottom: '1px solid transparent',
                                    transition: 'border-color 0.2s ease, color 0.2s ease',
                                },
                                'a:hover': {
                                    color: '#991b1b !important',
                                    borderBottomColor: '#991b1b !important',
                                },
                                h1: { fontFamily: '"Instrument Sans", sans-serif', fontWeight: '500', letterSpacing: '-0.025em' },
                                h2: { fontFamily: '"Instrument Sans", sans-serif', fontWeight: '500', letterSpacing: '-0.025em', marginTop: '2em' },
                                h3: { fontFamily: '"Instrument Sans", sans-serif', fontWeight: '500' },
                                h4: { fontFamily: '"Instrument Sans", sans-serif', fontWeight: '500' },
                                blockquote: {
                                    fontStyle: 'italic',
                                    fontWeight: '400',
                                    borderLeftWidth: '2px',
                                },
                                'code::before': { content: 'none' },
                                'code::after': { content: 'none' },
                                ':not(pre) > code': {
                                    fontWeight: '400',
                                    color: '#1c1c1c !important',
                                    backgroundColor: '#f4f4f5 !important',
                                    padding: '0.2em 0.4em',
                                    borderRadius: '0.25rem',
                                    fontSize: '0.875em',
                                },
                            },
                        },
                    },
                },
            },
        }
    </script>

    <style type="text/tailwindcss">
        @layer utilities {
            .tufte-grid {
                display: grid;
                grid-template-columns: 1fr min(65ch, 100%) 1fr;
                column-gap: 2rem;
            }
            .tufte-grid > * {
                grid-column: 2;
            }
            .tufte-grid > .full-width {
                grid-column: 1 / -1;
            }
            .tufte-grid > .margin-note {
                grid-column: 3;
                font-family: "Instrument Sans", sans-serif;
                font-size: 0.875rem;
                line-height: 1.4;
                color: #52525b;  
                margin-top: 0.25rem;
            }
            @media (max-width: 1024px) {
                .tufte-grid {
                    grid-template-columns: 1rem 1fr 1rem;
                }
                .tufte-grid > .margin-note {
                    grid-column: 2;
                    margin-top: 0.5rem;
                    margin-bottom: 1rem;
                    padding-left: 1rem;
                    border-left: 2px solid #e4e4e7;
                }
            }
        }
    </style>

    <link rel="stylesheet" href="https://nanx.me/css/custom.css" />

    
    <link rel="stylesheet" href="https://nanx.me/css/textmate.css" />
    

    

    <link rel="shortcut icon"
        href="https://nanx.me/image/favicon.png">

    
</head>

<body class="bg-paper text-ink font-serif antialiased selection:bg-zinc-200">
    
<header class="py-8 lg:py-12 text-sm font-sans tracking-wide max-w-[67ch] mx-auto w-full px-4 sm:px-6">
    <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 sm:gap-0">
        <a href="https://nanx.me/" class="font-medium text-ink hover:text-accent transition-colors">
            Nan Xiao
        </a>
        <nav class="flex flex-wrap gap-4 sm:gap-6 text-zinc-600">
            
            
            <a class="text-ink font-medium"
                href="https://nanx.me/blog/">
                Blog
            </a>
            
            <a class="hover:text-accent transition-colors"
                href="https://nanx.me/software/">
                Software
            </a>
            
            <a class="hover:text-accent transition-colors"
                href="https://nanx.me/papers/">
                Papers
            </a>
            
            <a class="hover:text-accent transition-colors"
                href="https://nanx.me/talks/">
                Talks
            </a>
            
            <a class="hover:text-accent transition-colors"
                href="https://nanx.me/books/">
                Books
            </a>
            
            <a class="hover:text-accent transition-colors"
                href="https://nanx.me/about/">
                About
            </a>
            
        </nav>
    </div>
</header>

<main class="content my-10 lg:my-20 max-w-[65ch] mx-auto w-full px-4 sm:px-6">
    <article>
        <header class="mb-14">
            <h1 class="text-3xl lg:text-4xl font-sans tracking-tight text-ink font-medium mb-4">Responsive Design for Statistical Graphics with Shiny and ggplot2</h1>

            <div class="text-zinc-500 font-sans text-sm tracking-wide">
                
                
                <span class="author" title="Nan Xiao">
                    Nan Xiao
                </span>
                
                

                <span class="date middot" title='Mon Jun 5 2023 01:00:00 UTC'>
                    June 5, 2023
                </span>

                <span class="reading-time middot">
                    4 min read
                </span>

                <div class="mt-8 flex flex-wrap gap-2">
                    
                    <a href="https://nanx.me/tags/r"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        R
                    </a>
                    
                    <a href="https://nanx.me/tags/shiny"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        Shiny
                    </a>
                    
                    <a href="https://nanx.me/tags/ggplot2"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        ggplot2
                    </a>
                    
                    
                    
                </div>
            </div>

        </header>

        <div class="prose prose-zinc max-w-none">
            
    


<div class="float">
<img src="https://nanx.me/image/amy-shamblen-DhULFYb5J9w-unsplash.jpg" alt="Photo by Amy Shamblen." />
<div class="figcaption">Photo by <a href="https://unsplash.com/photos/DhULFYb5J9w">Amy Shamblen</a>.</div>
</div>
<p>If you have written any Shiny apps, you are probably familiar with the idea of
<a href="https://en.wikipedia.org/wiki/Responsive_web_design">responsive web design</a>,
which focuses on web page layouts adaptive to screen size and popularized by
the front-end frameworks such as Bootstrap.</p>
<p>Could the similar idea be applied to statistical graphics?
In my opinion, the answer is yes, and the idea can be helpful for arranging
multi-panel graphics under the context of creating effective visualizations
that are adaptive to any screen sizes.</p>
<div id="starter-example" class="section level2">
<h2>Starter example</h2>
<p>It is straightforward to demonstrate the idea of
<strong>responsive statistical graphics</strong> with ggplot2 and Shiny.
The key steps are:</p>
<ol style="list-style-type: decimal">
<li>In Shiny, get the current plot output width and height detected in the
web browser using the session API provided by
<a href="https://shiny.posit.co/r/articles/build/client-data/"><code>session$clientData</code></a>.</li>
<li>In ggplot2, use the width data to decide the grid layout (number of columns)
and graphical details such as font size of the multi-facet plot.</li>
<li>Save the output with proper pixel width and height using an appropriate graphical device.</li>
<li>In Shiny, re-render the plot based on screen size changes using <code>shiny::renderImage()</code>.</li>
</ol>
<p>Following this logic, we can write a minimal prototype with 30 lines of R code:</p>
<pre class="r"><code>library(&quot;shiny&quot;)
library(&quot;ggplot2&quot;)

ui &lt;- fluidPage(
  plotOutput(&quot;plot_responsive&quot;)
)

server &lt;- function(input, output, session) {
  output$plot_responsive &lt;- renderImage(
    {
      width &lt;- session$clientData$output_plot_responsive_width
      height &lt;- session$clientData$output_plot_responsive_height

      outfile &lt;- tempfile(fileext = &quot;.png&quot;)

      png(outfile, width = width * 3, height = height * 3, res = 300)
      p &lt;- ggplot(mpg, aes(displ, hwy)) + geom_point()
      i &lt;- findInterval(width, c(540, 720, 960, 1140, 1320)) + 1
      p &lt;- p + facet_wrap(vars(class), ncol = c(1, 2, 3, 4, 6, 8)[i])
      print(p)
      dev.off()

      list(src = outfile, width = width, height = height)
    },
    deleteFile = TRUE
  )
}

shinyApp(ui, server)</code></pre>
<p>For the purpose of displaying information in a more interpretable way,
it might be a good idea to fix the aspect ratio of each panel or for
single-facet displays. There is also previous research suggesting the optimal
display ratio such as the
<a href="https://doi.org/10.2307/2288843">45° banking rule by Cleveland et al. (1988)</a>.</p>
</div>
<div id="responsive-graphics-within-responsive-containers" class="section level2">
<h2>Responsive graphics within responsive containers</h2>
<p>Of course, we can extend the idea of responsive graphics and fit them inside
a multi-column responsive page layout.
This <a href="https://gist.github.com/nanxstats/59e91cc32548c1522ebff55ef6facd20">GitHub Gist</a>
has a more generic implementation with modularized plotting and saving functions
to show both single-column and two-column layouts with vector-based
SVG output.</p>
<div class="ratio ratio-16x9">
<video controls autoplay class="object-fit-cover">
<source src="https://user-images.githubusercontent.com/199363/243249155-69c07023-e122-4265-83e8-570825220d80.mp4" type="video/mp4">
</video>
</div>
<div class="figcaption">
<p>A demo showing the single- and multi-column layout with responsive graphics.</p>
</div>
<p>The multi-column layout case is even more intriguing because unlike the
single-column case, this is a “responsive graphics within responsive containers”
situation:</p>
<ol style="list-style-type: decimal">
<li>Image output width is not equal to the screen size anymore, and the default
output width could be much smaller than the single-column case.</li>
<li>Image output width is not monotonic to screen size anymore because the
responsive layout effect of the Bootstrap fluid containers will also kick in:
columns can be rearranged to the next fluid row as screen size decreases.</li>
</ol>
<p>Therefore, if we want to keep the graphics to have consistent responsive layout
behaviors, more deliberate calculations and parameter settings might be required.</p>
</div>
<div id="a-technical-note-on-interval-finding" class="section level2">
<h2>A technical note on interval finding</h2>
<p>The reactive layout computation requires finding where the current plot width
falls in consecutive intervals of container sizes.
To achieve this, my original prototype implementation included many tedious
<code>if</code> constructs.</p>
<p>In fact, there are much better ways to handle such interval finding problems
in R: the <code>findInterval()</code> function can simplify the logic into one function
call. For fewer breaking points, you can also use a fancy approach with
upcasting, for example:</p>
<pre class="r"><code>i &lt;- (width &gt;= 960) + (width &gt;= 1140) + 1
p &lt;- p + facet_wrap(vars(class), ncol = c(1, 2, 4)[i])</code></pre>
<p>These tricks were taken from an online <a href="https://d.cosx.org/d/423852/5">discussion</a>
(thanks, <a href="https://yihui.org/"><span class="citation">@yihui</span></a>).</p>
</div>
<div id="conclusion" class="section level2">
<h2>Conclusion</h2>
<p>Of course, you can create a generic responsive plotting framework to automate
all the fine details discussed above!
Please kindly let me know if you or someone else has already done this
as I would love to try it out.</p>
</div>



        </div>

        
        <nav class="pagination-nav mt-10 mb-3" aria-label="Blog post navigation">
            <div class="navigation-btns">
                
                <a href="https://nanx.me/blog/post/sparse-index-tracking/" class="btn-nav btn-prev w-full">
                    <div class="btn-content">
                        <div class="pagination-nav-sublabel">Previous</div>
                        <div class="pagination-nav-label">&laquo; Sparse Index Tracking with msaenet and CVXR: A Two-Stage Regression Approach</div>
                    </div>
                </a>
                

                
                <a href="https://nanx.me/blog/post/knitr-chunk-option-error/" class="btn-nav btn-next w-full">
                    <div class="btn-content">
                        <div class="pagination-nav-sublabel">Next</div>
                        <div class="pagination-nav-label">Fix the &#39;non-numeric argument to binary operator&#39; Error in R Markdown and Quarto &raquo;</div>
                    </div>
                </a>
                
            </div>
        </nav>
        

    </article>
</main>

<section id="comments">
    <div class="py-3 content">
        <div class="mx-auto max-w-[65ch] w-full px-4 sm:px-6">
            <div class="comments">
                <script src="https://utteranc.es/client.js" repo="nanxstats/blog-comments" issue-term="pathname"
                    label="comment" theme="github-light" crossorigin="anonymous" async>
                    </script>
            </div>
        </div>
    </div>
</section>
<footer class="mt-20 mb-10 text-center font-sans text-sm text-zinc-500 tracking-wide">
    <div class="tufte-grid">
        <div class="flex flex-col items-center gap-4">
            <div class="flex flex-wrap items-center justify-center gap-x-4 gap-y-2">
                
                
                <a href="https://github.com/nanxstats" target="_blank" rel="noopener"
                    class="hover:text-accent transition-colors">GitHub</a>
                
                
                
                
                <a href="https://www.linkedin.com/in/nanxstats" target="_blank" rel="noopener"
                    class="hover:text-accent transition-colors">LinkedIn</a>
                
                
                <a href="https://bsky.app/profile/nanxstats.bsky.social" target="_blank" rel="noopener"
                    class="hover:text-accent transition-colors">Bluesky</a>
                
                
                <a href="https://twitter.com/nanxstats" target="_blank" rel="noopener"
                    class="hover:text-accent transition-colors">Twitter</a>
                
                
                
                <a href="https://nanx.me/colophon/" class="hover:text-accent transition-colors">Colophon</a>
                
                
            </div>

            
            <div class="mt-2">
                © 2026 Nan Xiao. All rights reserved.
            </div>
            
        </div>
    </div>
</footer>


    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"
        integrity="sha512-EBLzUL8XLl+va/zAsmXwS7Z2B1F9HUHkZwyS/VKwh3S7T/U0nF4BaU29EP/ZSf6zgiIxYAnKLu6bJ8dqpmX5uw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/r.min.js" defer></script>
    
    <script>
        window.addEventListener('load', function () {
            hljs.highlightAll();
        }, true);
    </script>
    

    

    
    
    
<script src="https://nanx.me/js/math-code.js"></script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    
</body>

</html>