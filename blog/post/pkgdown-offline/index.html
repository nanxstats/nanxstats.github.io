<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title> pkgdown.offline: Build pkgdown websites without an internet connection - Nan Xiao | 肖楠 </title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="referrer" content="no-referrer">
    <meta name="description" content="Introducing pkgdown.offline, an R package for building pkgdown websites entirely offline. Learn how it addresses recent pkgdown internet requirements, essential for CI/CD pipelines and air-gapped environments.
" />

    
    <meta property="og:type" content="article" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:site_name" content="Nan Xiao | 肖楠" />
    <meta property="og:url" content="https://nanx.me/blog/post/pkgdown-offline/" />
    <meta property="og:title" content="pkgdown.offline: Build pkgdown websites without an internet connection" />
    <meta property="og:description" content="Introducing pkgdown.offline, an R package for building pkgdown websites entirely offline. Learn how it addresses recent pkgdown internet requirements, essential for CI/CD pipelines and air-gapped environments.
" />
    <meta property="og:image" content="https://nanx.me/image/pkgdown-offline-banner.png" />
    <meta property="og:image:secure_url" content="https://nanx.me/image/pkgdown-offline-banner.png" />
    <meta property="article:published_time" content="2025-05-10T01:02:00Z" />
    <meta property="article:modified_time" content="2025-05-10T01:02:00Z" />
    <meta property="article:author" content="Nan Xiao" />

    
    <meta name="twitter:card" content="summary_large_image" />
    
    <meta name="twitter:site" content="@nanxstats">
    <meta name="twitter:creator" content="@nanxstats">
    
    <meta name="twitter:title" content="pkgdown.offline: Build pkgdown websites without an internet connection" />
    <meta name="twitter:description" content="Introducing pkgdown.offline, an R package for building pkgdown websites entirely offline. Learn how it addresses recent pkgdown internet requirements, essential for CI/CD pipelines and air-gapped environments.
" />
    <meta name="twitter:image" content="https://nanx.me/image/pkgdown-offline-banner.png" />
    <meta name="twitter:image:alt" content="pkgdown.offline: Build pkgdown websites without an internet connection" />

    
    <meta property="og:linkedin:actor" content="nanxstats" />

    <link rel="canonical" href="https://nanx.me/blog/post/pkgdown-offline/">

    
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        serif: ['"Martina Plantijn"', 'Newsreader', 'Georgia', 'Cambria', '"Times New Roman"', 'Times', 'serif'],
                        sans: ['"Instrument Sans"', 'system-ui', '-apple-system', '"Segoe UI"', 'Roboto', '"Helvetica Neue"', 'Arial', 'sans-serif'],
                        mono: ['"Liga Noto Sans Mono"', 'ui-monospace', 'SFMono-Regular', '"SF Mono"', 'Menlo', 'Consolas', 'monospace'],
                    },
                    colors: {
                        paper: '#fdfdfd',
                        ink: '#1c1c1c',
                        accent: '#991b1b',  
                    },
                    typography: {
                        DEFAULT: {
                            css: {
                                maxWidth: 'none',
                                color: '#1c1c1c',
                                '--tw-prose-body': '#1c1c1c',
                                '--tw-prose-headings': '#1c1c1c',
                                '--tw-prose-links': '#991b1b',
                                '--tw-prose-bold': '#111827',
                                '--tw-prose-counters': '#71717a',
                                '--tw-prose-bullets': '#d4d4d8',
                                '--tw-prose-hr': '#e4e4e7',
                                '--tw-prose-quotes': '#1c1c1c',
                                '--tw-prose-quote-borders': '#d4d4d8',
                                '--tw-prose-captions': '#71717a',
                                '--tw-prose-code': '#1c1c1c',
                                '--tw-prose-pre-code': '#1c1c1c',
                                '--tw-prose-pre-bg': '#fdfdfd',
                                '--tw-prose-th-borders': '#d4d4d8',
                                '--tw-prose-td-borders': '#e4e4e7',
                                'pre': {
                                    color: '#1c1c1c',
                                    backgroundColor: '#fdfdfd !important',
                                    border: '1px solid #e4e4e7',
                                },
                                a: {
                                    color: '#991b1b',
                                    textDecoration: 'none',
                                    fontWeight: '400',
                                    borderBottom: '1px solid transparent',
                                    transition: 'border-color 0.2s ease, color 0.2s ease',
                                },
                                'a:hover': {
                                    color: '#991b1b !important',
                                    borderBottomColor: '#991b1b !important',
                                },
                                h1: { fontFamily: '"Instrument Sans", sans-serif', fontWeight: '500', letterSpacing: '-0.025em' },
                                h2: { fontFamily: '"Instrument Sans", sans-serif', fontWeight: '500', letterSpacing: '-0.025em', marginTop: '2em' },
                                h3: { fontFamily: '"Instrument Sans", sans-serif', fontWeight: '500' },
                                h4: { fontFamily: '"Instrument Sans", sans-serif', fontWeight: '500' },
                                blockquote: {
                                    fontStyle: 'italic',
                                    fontWeight: '400',
                                    borderLeftWidth: '2px',
                                },
                                'code::before': { content: 'none' },
                                'code::after': { content: 'none' },
                                ':not(pre) > code': {
                                    fontWeight: '400',
                                    color: '#1c1c1c !important',
                                    backgroundColor: '#f4f4f5 !important',
                                    padding: '0.2em 0.4em',
                                    borderRadius: '0.25rem',
                                    fontSize: '0.875em',
                                },
                            },
                        },
                    },
                },
            },
        }
    </script>

    <style type="text/tailwindcss">
        @layer utilities {
            .tufte-grid {
                display: grid;
                grid-template-columns: 1fr min(65ch, 100%) 1fr;
                column-gap: 2rem;
            }
            .tufte-grid > * {
                grid-column: 2;
            }
            .tufte-grid > .full-width {
                grid-column: 1 / -1;
            }
            .tufte-grid > .margin-note {
                grid-column: 3;
                font-family: "Instrument Sans", sans-serif;
                font-size: 0.875rem;
                line-height: 1.4;
                color: #52525b;  
                margin-top: 0.25rem;
            }
            @media (max-width: 1024px) {
                .tufte-grid {
                    grid-template-columns: 1rem 1fr 1rem;
                }
                .tufte-grid > .margin-note {
                    grid-column: 2;
                    margin-top: 0.5rem;
                    margin-bottom: 1rem;
                    padding-left: 1rem;
                    border-left: 2px solid #e4e4e7;
                }
            }
        }
    </style>

    <link rel="stylesheet" href="https://nanx.me/css/custom.css" />

    
    <link rel="stylesheet" href="https://nanx.me/css/textmate.css" />
    

    

    <link rel="shortcut icon"
        href="https://nanx.me/image/favicon.png">

    
</head>

<body class="bg-paper text-ink font-serif antialiased selection:bg-zinc-200">
    
<header class="py-8 lg:py-12 text-sm font-sans tracking-wide max-w-[67ch] mx-auto w-full px-4 sm:px-6">
    <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 sm:gap-0">
        <a href="https://nanx.me/" class="font-medium text-ink hover:text-accent transition-colors">
            Nan Xiao
        </a>
        <nav class="flex flex-wrap gap-4 sm:gap-6 text-zinc-600">
            
            
            <a class="text-ink font-medium"
                href="https://nanx.me/blog/">
                Blog
            </a>
            
            <a class="hover:text-accent transition-colors"
                href="https://nanx.me/software/">
                Software
            </a>
            
            <a class="hover:text-accent transition-colors"
                href="https://nanx.me/papers/">
                Papers
            </a>
            
            <a class="hover:text-accent transition-colors"
                href="https://nanx.me/talks/">
                Talks
            </a>
            
            <a class="hover:text-accent transition-colors"
                href="https://nanx.me/books/">
                Books
            </a>
            
            <a class="hover:text-accent transition-colors"
                href="https://nanx.me/about/">
                About
            </a>
            
        </nav>
    </div>
</header>

<main class="content my-10 lg:my-20 max-w-[65ch] mx-auto w-full px-4 sm:px-6">
    <article>
        <header class="mb-14">
            <h1 class="text-3xl lg:text-4xl font-sans tracking-tight text-ink font-medium mb-4">pkgdown.offline: Build pkgdown websites without an internet connection</h1>

            <div class="text-zinc-500 font-sans text-sm tracking-wide">
                
                
                <span class="author" title="Nan Xiao">
                    Nan Xiao
                </span>
                
                

                <span class="date middot" title='Sat May 10 2025 01:02:00 UTC'>
                    May 10, 2025
                </span>

                <span class="reading-time middot">
                    3 min read
                </span>

                <div class="mt-8 flex flex-wrap gap-2">
                    
                    <a href="https://nanx.me/tags/r"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        R
                    </a>
                    
                    <a href="https://nanx.me/tags/r-packages"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        R packages
                    </a>
                    
                    <a href="https://nanx.me/tags/pkgdown"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        pkgdown
                    </a>
                    
                    <a href="https://nanx.me/tags/documentation"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        documentation
                    </a>
                    
                    <a href="https://nanx.me/tags/cicd"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        CICD
                    </a>
                    
                    <a href="https://nanx.me/tags/offline-build"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        offline build
                    </a>
                    
                    <a href="https://nanx.me/tags/monkey-patching"
                        class="inline-flex items-center px-3 py-1 rounded-full bg-zinc-100 text-zinc-600 hover:bg-zinc-200 hover:text-ink transition-colors text-xs font-medium tracking-wide">
                        monkey patching
                    </a>
                    
                    
                    
                </div>
            </div>

        </header>

        <div class="prose prose-zinc max-w-none">
            
    


<div class="float">
<img src="https://nanx.me/image/pkgdown-offline-banner.png" alt="On the grid but off the line. Logo font: Founders Grotesk Condensed Semibold." />
<div class="figcaption">On the grid but off the line. Logo font: Founders Grotesk Condensed Semibold.</div>
</div>
<p>I’m pleased to announce that the R package
<a href="https://nanx.me/pkgdown.offline/">pkgdown.offline</a> is now available on CRAN.
You can install it with:</p>
<pre class="r"><code>install.packages(&quot;pkgdown.offline&quot;)</code></pre>
<p>pkgdown.offline enables you to build <a href="https://pkgdown.r-lib.org/">pkgdown</a>
websites in environments without internet access, such as private, restricted
development workflows or CI/CD pipelines. It achieves this by bundling the
essential frontend assets (CSS, JavaScript) that pkgdown typically fetches
online and by providing alternative implementations for key pkgdown functions
like <code>init_site()</code> and <code>build_site()</code>.</p>
<div id="the-need-for-an-offline-solution" class="section level2">
<h2>The need for an offline solution</h2>
<p>Previously, setting <code>options(pkgdown.internet = FALSE)</code> was sufficient for
offline pkgdown builds (since pkgdown 1.2.0, November 2018). However, this
functionality stopped to work effectively with pkgdown 2.1.0 (July 2024)
and was formally deprecated in pkgdown 2.1.2 (released April 2025).</p>
<p>This change presents a challenge for users in air-gapped computing environments,
as attempting to build pkgdown sites will fail directly without any built-in
options to bypass the internet requirement.
After observing this recurring issue and initially suggesting workarounds
like using older pkgdown versions, I developed pkgdown.offline to provide
a more robust and forward-looking solution.</p>
</div>
<div id="how-pkgdown.offline-works" class="section level2">
<h2>How pkgdown.offline works</h2>
<p>pkgdown.offline uses a few key strategies to achieve reliable offline builds
while optimizing package size.</p>
<p><strong>1. Minified local asset cache</strong></p>
<p>A primary reason for pkgdown deprecating its offline build feature was the
challenge of bundling and maintaining frontend assets. pkgdown.offline
solves this by including these assets. To keep the package size minimal
(well under CRAN’s 5MB limit) and support multiple pkgdown versions,
a maintenance script deduplicates cached assets using file checksums.
The initial release of pkgdown.offline is only about 600KB.
At runtime, the package uses a map generated during the deduplication step
to restore the necessary files to their expected locations.</p>
<p><strong>2. Monkey patching core functions</strong></p>
<p>With the <code>pkgdown.internet</code> option removed, some internal pkgdown functions
now assume internet connectivity. pkgdown.offline provides wrappers for
critical functions like <code>pkgdown::init_site()</code> and <code>pkgdown::build_site()</code>.
These wrappers dynamically modify (or “monkey patch”) relevant internal pkgdown
functions at runtime to prevent them from attempting to connect to the internet.
This approach is similar to the <a href="https://nanx.me/blog/post/testthat-snapshot-monkey-patch/">testthat snapshot location
customization method</a>
I have described previously.</p>
<p><strong>3. Lifecycle management</strong></p>
<p>pkgdown.offline is designed to support pkgdown versions 2.1.0 and newer.
With each new release of pkgdown on CRAN, pkgdown.offline will be verified and,
if necessary, updated to ensure continued compatibility.
Based on pkgdown’s historical release pattern, this maintenance is expected
to be manageable. Details on the update procedure are documented in the
<a href="https://nanx.me/pkgdown.offline/articles/update.html">update pkgdown.offline vignette</a>.</p>
</div>
<div id="get-started-and-contribute" class="section level2">
<h2>Get started and contribute</h2>
<p>pkgdown.offline is released under the MIT license. If this package addresses
a need for you, please consider giving it a star on
<a href="https://github.com/nanxstats/pkgdown.offline">GitHub</a>.
As always, community feedback and contributions are welcome.</p>
</div>



        </div>

        
        <nav class="pagination-nav mt-10 mb-3" aria-label="Blog post navigation">
            <div class="navigation-btns">
                
                <a href="https://nanx.me/blog/post/inter-optical-sizing/" class="btn-nav btn-prev w-full">
                    <div class="btn-content">
                        <div class="pagination-nav-sublabel">Previous</div>
                        <div class="pagination-nav-label">&laquo; Customizing Inter with alternative optical sizing presets</div>
                    </div>
                </a>
                

                
                <a href="https://nanx.me/blog/post/my-first-pycon-experience/" class="btn-nav btn-next w-full">
                    <div class="btn-content">
                        <div class="pagination-nav-sublabel">Next</div>
                        <div class="pagination-nav-label">My First PyCon Experience &raquo;</div>
                    </div>
                </a>
                
            </div>
        </nav>
        

    </article>
</main>

<section id="comments">
    <div class="py-3 content">
        <div class="mx-auto max-w-[65ch] w-full px-4 sm:px-6">
            <div class="comments">
                <script src="https://utteranc.es/client.js" repo="nanxstats/blog-comments" issue-term="pathname"
                    label="comment" theme="github-light" crossorigin="anonymous" async>
                    </script>
            </div>
        </div>
    </div>
</section>
<footer class="mt-20 mb-10 text-center font-sans text-sm text-zinc-500 tracking-wide">
    <div class="tufte-grid">
        <div class="flex flex-col items-center gap-4">
            <div class="flex flex-wrap items-center justify-center gap-x-4 gap-y-2">
                
                
                <a href="https://github.com/nanxstats" target="_blank" rel="noopener"
                    class="hover:text-accent transition-colors">GitHub</a>
                
                
                
                
                <a href="https://www.linkedin.com/in/nanxstats" target="_blank" rel="noopener"
                    class="hover:text-accent transition-colors">LinkedIn</a>
                
                
                <a href="https://bsky.app/profile/nanxstats.bsky.social" target="_blank" rel="noopener"
                    class="hover:text-accent transition-colors">Bluesky</a>
                
                
                <a href="https://twitter.com/nanxstats" target="_blank" rel="noopener"
                    class="hover:text-accent transition-colors">Twitter</a>
                
                
                
                <a href="https://nanx.me/colophon/" class="hover:text-accent transition-colors">Colophon</a>
                
                
            </div>

            
            <div class="mt-2">
                © 2026 Nan Xiao. All rights reserved.
            </div>
            
        </div>
    </div>
</footer>


    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"
        integrity="sha512-EBLzUL8XLl+va/zAsmXwS7Z2B1F9HUHkZwyS/VKwh3S7T/U0nF4BaU29EP/ZSf6zgiIxYAnKLu6bJ8dqpmX5uw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/r.min.js" defer></script>
    
    <script>
        window.addEventListener('load', function () {
            hljs.highlightAll();
        }, true);
    </script>
    

    

    
    
    

    
</body>

</html>